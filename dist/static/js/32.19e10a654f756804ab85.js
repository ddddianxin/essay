webpackJsonp([32],{DHV1:function(e,t){},EF0V:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("XQra"),n=o("USSz"),i=o("CCn6");function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,o){return function s(n,i){try{var a=t[n](i),r=a.value}catch(e){return void o(e)}if(!a.done)return Promise.resolve(r).then(function(e){s("next",e)},function(e){s("throw",e)});e(r)}("next")})}}var r={name:"evaluate",data:function(){return{order_id:"",info:"",form:{goodsId:"",speId:"",content:"",goodsRank:5,photos:[]},fileList:[],dialogImageUrl:"",dialogVisible:!1}},components:{sideBar:s.a,headTop:n.a},mounted:function(){this.initData()},computed:{},methods:{initData:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.order_id=e.$route.query.order_id||"",t.next=3,Object(i.A)(e.order_id);case 3:o=t.sent,e.info=o,e.form.goodsId=o.goods[0].goods_id,e.form.speId=o.goods[0].spec_id;case 7:case"end":return t.stop()}},t,e)}))()},goBack:function(){this.$router.go(-1)},handleChange:function(e,t){this.calculateFileList(t)},handleRemove:function(e,t){this.calculateFileList(t)},handlePictureCardPreview:function(e,t){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleExceed:function(e,t){this.$message.warning("当前限制只能选择上传 5 张图片")},toDetail:function(e){this.$router.push({path:"/userCenter/order/detail",query:{order_id:e}})},confirm:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.form.content){t.next=4;break}e.$message({message:"评价内容不能为空",type:"warning"}),t.next=10;break;case 4:return t.next=6,Object(i.c)(e.form.content,e.form.goodsId,e.form.speId,e.order_id,e.form.goodsRank,e.form.photos);case 6:o=t.sent,e.$message({message:o.msg,type:12e3==o.status?"success":"warning"}),s=e,setTimeout(function(){s.$router.push({path:"/userCenter/order/detail",query:{order_id:s.order_id}})},1e3);case 10:case"end":return t.stop()}},t,e)}))()},calculateFileList:function(e){for(var t=[],o=0;o<e.length;o++)t[o]=e[o].response;this.form.photos=t}},created:function(){}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("head-top",{attrs:{webActive:"mine"}}),e._v(" "),o("div",{staticClass:"bgGray",attrs:{id:"unIndex"}},[o("div",{staticClass:"container"},[o("div",{staticClass:"ucBg"},[o("side-bar"),e._v(" "),o("div",{staticClass:"ucPanel ucP_Box"},[o("el-page-header",{attrs:{content:"写评价"},on:{back:e.goBack}}),e._v(" "),o("div",{staticClass:"flex f-nowrap j-bet topDes"},[o("div",[o("span",{staticClass:"mr15"},[e._v("订单编号："+e._s(e.info.order_code))]),e._v(" "),o("span",[e._v("下单时间："+e._s(e.info.time))])]),e._v(" "),o("div",[o("el-button",{staticClass:"mr10",attrs:{size:"small"},on:{click:function(t){return e.toDetail(e.order_id)}}},[e._v("查看详情")]),e._v(" "),o("span",{class:"待付款"==e.info.state?"colorPrice stateText":"取消订单"==e.info.state?"color9 stateText":"colorGreen stateText"},[e._v(e._s(e.info.state))])],1)]),e._v(" "),o("div",{staticClass:"ePanel"},[o("div",{staticClass:"ePic"},[o("el-image",{staticClass:"eImg",attrs:{src:e.info.goods[0].pic,fit:"cover","preview-src-list":Array(e.info.goods[0].pic)}})],1),e._v(" "),o("div",{staticClass:"eInfo"},[o("h1",[e._v(e._s(e.info.goods[0].name))]),e._v(" "),o("p",[e._v("规格："+e._s(e.info.goods[0].spec_name)+e._s(e.info.goods[0].spec_unit))]),e._v(" "),o("p",[e._v("价格：￥"+e._s(e.info.goods[0].price)+"/"+e._s(e.info.goods[0].supply_unit))]),e._v(" "),o("p",[e._v("数量："+e._s(e.info.goods[0].number))])]),e._v(" "),o("div",{staticClass:"eBox"},[o("el-form",{ref:"form",attrs:{"label-width":"80px"}},[o("el-form-item",{staticClass:"eLine",attrs:{label:"评分"}},[o("el-rate",{staticClass:"mt10",attrs:{"show-score":"","text-color":"#ff9900"},model:{value:e.form.goodsRank,callback:function(t){e.$set(e.form,"goodsRank",t)},expression:"form.goodsRank"}})],1),e._v(" "),o("el-form-item",{staticClass:"eLine",attrs:{label:"评价"}},[o("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"1000","show-word-limit":"",autosize:{minRows:4,maxRows:6}},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),o("el-form-item",{staticClass:"eLine",attrs:{label:"晒图"}},[o("el-upload",{staticClass:"picUploader",attrs:{action:"http://api.sixmol.com/api/v1/uploadComment",limit:5,"on-exceed":e.handleExceed,"list-type":"picture-card","on-change":e.handleChange,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[o("i",{staticClass:"el-icon-plus"})]),e._v(" "),o("el-dialog",{staticClass:"tc",attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("img",{attrs:{src:e.dialogImageUrl,alt:""}})])],1)],1)],1)]),e._v(" "),o("div",{staticClass:"tc mt30 f16"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v("提交评价")])],1)],1)],1)])])],1)},staticRenderFns:[]};var l=o("VU/8")(r,c,!1,function(e){o("DHV1")},null,null);t.default=l.exports}});
//# sourceMappingURL=32.19e10a654f756804ab85.js.map