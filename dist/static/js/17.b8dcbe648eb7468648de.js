webpackJsonp([17],{"06dt":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("gvrZ"),o=r("CCn6");function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function s(o,a){try{var n=t[o](a),i=n.value}catch(e){return void r(e)}if(!n.done)return Promise.resolve(i).then(function(e){s("next",e)},function(e){s("throw",e)});e(i)}("next")})}}var n={name:"mForgetkey",data:function(){return{vertifyUrl:"",form:{mobile:"",piccode:"",code:"",codeToken:"",password:"",password2:""},computedTime:0,rules:{mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{type:"number",message:"手机号必须为数字值",trigger:"blur"},{pattern:/^1\d{10}$/,message:"手机号格式不对",trigger:"blur"}],piccode:[{required:!0,message:"请输入图形校验码",trigger:"blur"},{pattern:/^[0-9]*$/,message:"请输入数字",trigger:"blur"}],code:[{required:!0,message:"请输入短信验证码",trigger:"blur"},{pattern:/^[0-9]*$/,message:"请输入数字",trigger:"blur"}],password:[{required:!0,type:"string",message:"请输入密码",trigger:"blur"}],password2:[{required:!0,type:"string",message:"请再次输入密码",trigger:"blur"}]}}},components:{mheadTop:s.a},mounted:function(){this.initData()},computed:{},methods:{initData:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.freshVertify();case 1:case"end":return t.stop()}},t,e)}))()},submitForm:function(){var e,t=this;this.$refs.form.validate((e=a(regeneratorRuntime.mark(function e(r){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}if(t.form.password!=t.form.password2){e.next=8;break}return e.next=4,Object(o.u)(t.form.password,t.form.password2,t.form.code,t.form.codeToken);case 4:12e3==(s=e.sent).status?(t.$message({message:s.msg,type:"success"}),t.$router.push({name:"/login/login",params:{}})):t.$message({message:s.msg,type:"warning"}),e.next=9;break;case 8:t.$message({message:"两次输入密码不一致",type:"warning"});case 9:e.next=13;break;case 11:return console.log("error submit!!"),e.abrupt("return",!1);case 13:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},getVerifyCode:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.form.mobile){t.next=4;break}e.$message({message:"手机号码不能为空",type:"warning"}),t.next=18;break;case 4:if(/^1\d{10}$/gi.test(e.form.mobile)){t.next=8;break}e.$message({message:"手机格式不正确",type:"warning"}),t.next=18;break;case 8:if(""!=e.form.piccode){t.next=12;break}e.$message({message:"图形校验码不能为空",type:"warning"}),t.next=18;break;case 12:return e.computedTime=30,e.timer=setInterval(function(){e.computedTime--,0==e.computedTime&&clearInterval(e.timer)},1e3),t.next=16,Object(o.v)(e.form.mobile,e.form.piccode,"forGetKey");case 16:12e3==(r=t.sent).status?(e.form.codeToken=r.codeToken||"",e.$message({message:r.msg,type:"success"})):(e.$message({message:r.msg,type:"warning"}),e.freshVertify());case 18:case"end":return t.stop()}},t,e)}))()},freshVertify:function(){this.vertifyUrl="http://api.sixmol.com/api/v1/VerifyHelper?i="+Math.floor(10*Math.random()+1)}},created:function(){}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("mhead-top",{attrs:{titleHead:"logo",lfIcon:"el-icon-s-home icon",lfUrl:"/home",rgIcon:"el-icon-user-solid icon",rgUrl:"/userCenter/index/index"}}),e._v(" "),r("div",{staticClass:"mBg"},[r("div",{staticClass:"regBox"},[r("div",{staticClass:"register-panel"},[r("h2",{staticClass:"tc"},[e._v("找回密码")]),e._v(" "),r("el-form",{ref:"form",staticClass:"forgetForm mt15",attrs:{model:e.form,rules:e.rules,"label-width":"80px","label-position":"top"}},[r("el-form-item",{staticClass:"fTit",attrs:{label:"手机号",prop:"mobile"}},[r("el-input",{attrs:{type:"number",placeholder:"请输入手机号"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",e._n(t))},expression:"form.mobile"}})],1),e._v(" "),r("el-form-item",{staticClass:"fTit",attrs:{label:"校验码",prop:"piccode"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{placeholder:"请输入图形校验码"},model:{value:e.form.piccode,callback:function(t){e.$set(e.form,"piccode",t)},expression:"form.piccode"}})],1),e._v(" "),r("el-col",{staticStyle:{height:"40px"},attrs:{offset:1,span:11}},[r("img",{staticClass:"vertifyPic",attrs:{src:e.vertifyUrl},on:{click:function(t){return e.freshVertify()}}})])],1)],1),e._v(" "),r("el-form-item",{staticClass:"fTit",attrs:{label:"验证码",prop:"code"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{placeholder:"请输入短信验证码"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),r("el-col",{attrs:{offset:1,span:11}},[r("el-button",{staticClass:"w",attrs:{type:"primary",disabled:!!e.computedTime},on:{click:function(t){return t.preventDefault(),e.getVerifyCode(t)}}},[e._v(e._s(e.computedTime?"已发送("+e.computedTime+"s)":"获取短信验证码"))])],1)],1)],1),e._v(" "),r("el-form-item",{staticClass:"fTit",attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),r("el-form-item",{staticClass:"fTit",attrs:{label:"再输密码",prop:"password2"}},[r("el-input",{attrs:{placeholder:"请再次确认密码","show-password":""},model:{value:e.form.password2,callback:function(t){e.$set(e.form,"password2",t)},expression:"form.password2"}})],1),e._v(" "),r("el-button",{staticClass:"w mt10 mb15",attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("确定")])],1)],1),e._v(" "),r("div",{staticClass:"loginP_bottom tc"},[e._v("已有账号？"),r("router-link",{staticClass:"colorGreen",attrs:{to:{path:"/login/login",query:{}}}},[e._v("登录")])],1)])])],1)},staticRenderFns:[]};var c=r("VU/8")(n,i,!1,function(e){r("SdsE")},null,null);t.default=c.exports},SdsE:function(e,t){}});
//# sourceMappingURL=17.b8dcbe648eb7468648de.js.map