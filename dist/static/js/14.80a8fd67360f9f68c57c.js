webpackJsonp([14],{AXCW:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("XQra"),n=r("NYxO"),s=r("CCn6"),o=r("95YI"),i=r.n(o),c=r("USSz"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function a(n,s){try{var o=t[n](s),i=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}var m={name:"addressPage",data:function(){return{dialogFormVisible:!1,tableData:[],submitType:0,form:{add_id:"",place:"",address_detail:"",mobile:"",name:"",province:"",city:"",area:""},selArea:!1,rules:{place:[{required:!0,message:"请选择所在地区"}],address_detail:[{required:!0,type:"string",message:"请填写详细地址",trigger:"blur"}],name:[{required:!0,type:"string",message:"请填写收货人",trigger:"blur"}],mobile:[{required:!0,message:"请填写手机号码"},{type:"number",message:"手机号必须为数字值"}]}}},components:{sideBar:a.a,VDistpicker:i.a,headTop:c.a},mounted:function(){this.initData()},computed:l({},Object(n.d)(["login","addressIndex"])),methods:{initData:function(){var e=this;return u(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.f)();case 2:if(!(r=t.sent)){t.next=11;break}if(12007==r.status){t.next=10;break}return t.next=7,Object(s.f)();case 7:e.tableData=t.sent,t.next=11;break;case 10:e.$message({message:r.msg,type:"warning"});case 11:case"end":return t.stop()}},t,e)}))()},handleChange:function(e){console.log(e)},addAddress:function(){this.form.province="",this.form.city="",this.form.area="",this.login?(this.submitType=0,this.tableData.length>=6?this.$message({message:"地址已达到上限，不能超过6条哦",type:"warning"}):this.dialogFormVisible=!0):this.$message({message:"请先登录",type:"warning"})},onSelected:function(e){this.form.province=e.province.value,this.form.city=e.city.value,this.form.area=e.area.value,this.form.place=e.province.value+e.city.value+e.area.value,console.log(e),this.selArea=!1},submitForm:function(e){var t,r=this;this.$refs[e].validate((t=u(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=21;break}if(console.log(r.submitType),console.log(r.form),0!=r.submitType){e.next=9;break}return e.next=6,Object(s.a)(r.form.address_detail,r.form.mobile,r.form.name,r.form.province,r.form.city,r.form.area);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,Object(s.s)(r.form.add_id,r.form.address_detail,r.form.mobile,r.form.name,r.form.province,r.form.city,r.form.area);case 11:a=e.sent;case 12:if(!a){e.next=19;break}if(r.$message({message:a.msg,type:12e3==a.status?"success":"warning"}),12e3!=a.status){e.next=19;break}return e.next=17,Object(s.f)();case 17:r.tableData=e.sent,r.dialogFormVisible=!1;case 19:e.next=23;break;case 21:return console.log("error submit!!"),e.abrupt("return",!1);case 23:case"end":return e.stop()}},e,r)})),function(e){return t.apply(this,arguments)}))},editAddress:function(e){var t=this;return u(regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.submitType=1,r.next=3,Object(s.t)(e);case 3:a=r.sent,t.form.add_id=a.address_id,t.form.place=a.province+" "+a.city+" "+a.district,t.form.address_detail=a.address_detail,t.form.mobile=parseInt(a.mobile),t.form.name=a.name,t.form.province=a.province,t.form.city=a.city,t.form.area=a.district,t.dialogFormVisible=!0;case 13:case"end":return r.stop()}},r,t)}))()},delAddress:function(e){var t=this;return u(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log(e),t.$confirm("确定要删除该地址?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(u(regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(s.n)(e);case 2:if(a=r.sent,console.log("add_id:"+e),!a){r.next=10;break}if(t.$message({message:a.msg,type:12e3==a.status?"success":"warning"}),12e3!=a.status){r.next=10;break}return r.next=9,Object(s.f)();case 9:t.tableData=r.sent;case 10:case"end":return r.stop()}},r,t)}))).catch(u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,t)})));case 2:case"end":return r.stop()}},r,t)}))()},setDefault:function(e,t){var r=this;console.log(t),1==t&&this.$confirm("确定要将此条地址设为默认地址?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(u(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.m)(e);case 2:if(!(a=t.sent)){t.next=10;break}if(console.log(a),r.$message({message:a.msg,type:12e3==a.status?"success":"warning"}),12e3!=a.status){t.next=10;break}return t.next=9,Object(s.f)();case 9:r.tableData=t.sent;case 10:case"end":return t.stop()}},t,r)}))).catch(u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.f)();case 2:r.tableData=e.sent;case 3:case"end":return e.stop()}},e,r)})))}},created:function(){}},f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("head-top",{attrs:{webActive:"mine"}}),e._v(" "),r("div",{staticClass:"bgGray",attrs:{id:"unIndex"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"ucBg"},[r("side-bar"),e._v(" "),r("div",{staticClass:"ucPanel ucP_Box"},[r("div",{staticClass:"ucTitNav ofh"},[r("span",[e._v("地址管理")]),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",plain:""},on:{click:function(t){return e.addAddress()}}},[e._v("添加新地址")])],1),e._v(" "),r("el-table",{staticClass:"invTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{label:"设为默认",prop:"default"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{disabled:t.row.is_default},on:{change:function(r){return e.setDefault(t.row.add_id,t.row.is_default)}},model:{value:t.row.is_default,callback:function(r){e.$set(t.row,"is_default",r)},expression:"scope.row.is_default"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"收货人",prop:"name"}}),e._v(" "),r("el-table-column",{attrs:{label:"地址",prop:"address"}}),e._v(" "),r("el-table-column",{attrs:{label:"联系电话",prop:"phone"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-row",[r("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(r){return e.editAddress(t.row.add_id)}}}),e._v(" "),r("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:function(r){return e.delAddress(t.row.add_id)}}})],1)]}}])})],1),e._v(" "),r("el-dialog",{attrs:{title:"收货地址",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"所在地区",prop:"place"}},[r("el-input",{staticStyle:{display:"none"},attrs:{type:"text",placeholder:"省份、城市、区",autocomplete:"off"},on:{focus:function(t){e.selArea=!0}},model:{value:e.form.province+" "+e.form.city+" "+e.form.area,callback:function(t){e.$set(e.form.province+" "+e.form.city+" "+e.form,"area",t)},expression:"form.province+' '+form.city+' '+form.area"}}),e._v(" "),r("v-distpicker",{staticClass:"placeInput",attrs:{province:e.form.province,city:e.form.city,area:e.form.area},on:{selected:e.onSelected}})],1),e._v(" "),r("el-form-item",{attrs:{label:"详细地址",prop:"address_detail"}},[r("el-input",{attrs:{type:"textarea",placeholder:"详细地址，如街道，楼盘号等"},model:{value:e.form.address_detail,callback:function(t){e.$set(e.form,"address_detail",t)},expression:"form.address_detail"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"收货人",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[r("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",e._n(t))},expression:"form.mobile"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)],1)])])],1)},staticRenderFns:[]};var d=r("VU/8")(m,f,!1,function(e){r("Y9eh")},"data-v-c01d510c",null);t.default=d.exports},Y9eh:function(e,t){}});
//# sourceMappingURL=14.80a8fd67360f9f68c57c.js.map