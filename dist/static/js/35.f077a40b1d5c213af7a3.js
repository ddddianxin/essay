webpackJsonp([35],{MPbE:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("USSz"),o=t("CCn6");function a(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function s(o,a){try{var n=r[o](a),i=n.value}catch(e){return void t(e)}if(!n.done)return Promise.resolve(i).then(function(e){s("next",e)},function(e){s("throw",e)});e(i)}("next")})}}var n={name:"register",data:function(){return{vertifyUrl:"",form:{mobile:"",piccode:"",code:"",codeToken:"",password:"",password2:""},computedTime:0,rules:{mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{type:"number",message:"手机号必须为数字值",trigger:"blur"},{pattern:/^1\d{10}$/,message:"手机号格式不对",trigger:"blur"}],piccode:[{required:!0,message:"请输入图形校验码",trigger:"blur"},{pattern:/^[0-9]*$/,message:"请输入数字",trigger:"blur"}],code:[{required:!0,message:"请输入短信验证码",trigger:"blur"},{pattern:/^[0-9]*$/,message:"请输入数字",trigger:"blur"}],password:[{required:!0,type:"string",message:"请输入密码",trigger:"blur"}],password2:[{required:!0,type:"string",message:"请再次输入密码",trigger:"blur"}]}}},components:{headTop:s.a},mounted:function(){this.initData()},computed:{},methods:{initData:function(){var e=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.freshVertify();case 1:case"end":return r.stop()}},r,e)}))()},submitForm:function(){var e,r=this;this.$refs.form.validate((e=a(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}if(r.form.password!=r.form.password2){e.next=8;break}return e.next=4,Object(o.u)(r.form.password,r.form.password2,r.form.code,r.form.codeToken);case 4:12e3==(s=e.sent).status?(r.$message({message:s.msg,type:"success"}),r.$router.push({name:"/login/login",params:{}})):r.$message({message:s.msg,type:"warning"}),e.next=9;break;case 8:r.$message({message:"两次输入密码不一致",type:"warning"});case 9:e.next=13;break;case 11:return console.log("error submit!!"),e.abrupt("return",!1);case 13:case"end":return e.stop()}},e,r)})),function(r){return e.apply(this,arguments)}))},getVerifyCode:function(){var e=this;return a(regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(""!=e.form.mobile){r.next=4;break}e.$message({message:"手机号码不能为空",type:"warning"}),r.next=18;break;case 4:if(/^1\d{10}$/gi.test(e.form.mobile)){r.next=8;break}e.$message({message:"手机格式不正确",type:"warning"}),r.next=18;break;case 8:if(""!=e.form.piccode){r.next=12;break}e.$message({message:"图形校验码不能为空",type:"warning"}),r.next=18;break;case 12:return e.computedTime=30,e.timer=setInterval(function(){e.computedTime--,0==e.computedTime&&clearInterval(e.timer)},1e3),r.next=16,Object(o.v)(e.form.mobile,e.form.piccode,"forGetKey");case 16:12e3==(t=r.sent).status?(e.form.codeToken=t.codeToken||"",e.$message({message:t.msg,type:"success"})):(e.$message({message:t.msg,type:"warning"}),e.freshVertify());case 18:case"end":return r.stop()}},r,e)}))()},freshVertify:function(){this.vertifyUrl="http://api.sixmol.com/api/v1/VerifyHelper?i="+Math.floor(10*Math.random()+1)}},created:function(){}},i={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("head-top",{attrs:{webActive:"home"}}),e._v(" "),t("div",{staticClass:"bgLogin",attrs:{id:"login"}},[t("div",{staticClass:"container"},[t("div",{staticClass:"loginBg"},[t("div",{staticClass:"regBox"},[t("div",{staticClass:"login-panel"},[t("h2",{staticClass:"tl"},[e._v("重设密码")]),e._v(" "),t("el-form",{ref:"form",staticClass:"forgetForm mt15",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入手机号"},model:{value:e.form.mobile,callback:function(r){e.$set(e.form,"mobile",e._n(r))},expression:"form.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"校验码",prop:"piccode"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"请输入图形校验码"},model:{value:e.form.piccode,callback:function(r){e.$set(e.form,"piccode",r)},expression:"form.piccode"}})],1),e._v(" "),t("el-col",{staticStyle:{height:"40px"},attrs:{offset:1,span:11}},[t("img",{staticClass:"vertifyPic",attrs:{src:e.vertifyUrl},on:{click:function(r){return e.freshVertify()}}})])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"验证码",prop:"code"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"请输入短信验证码"},model:{value:e.form.code,callback:function(r){e.$set(e.form,"code",r)},expression:"form.code"}})],1),e._v(" "),t("el-col",{attrs:{offset:1,span:11}},[t("el-button",{staticClass:"w",attrs:{type:"primary",disabled:!!e.computedTime},on:{click:function(r){return r.preventDefault(),e.getVerifyCode(r)}}},[e._v(e._s(e.computedTime?"已发送("+e.computedTime+"s)":"获取短信验证码"))])],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"再输密码",prop:"password2"}},[t("el-input",{attrs:{placeholder:"请再次确认密码","show-password":""},model:{value:e.form.password2,callback:function(r){e.$set(e.form,"password2",r)},expression:"form.password2"}})],1),e._v(" "),t("el-button",{staticClass:"w mt10 mb15",attrs:{type:"primary"},on:{click:function(r){return e.submitForm()}}},[e._v("确定")])],1)],1),e._v(" "),t("div",{staticClass:"loginP_bottom tc"},[e._v("已有账号？"),t("router-link",{staticClass:"colorGreen",attrs:{to:{path:"/login/login",query:{}}}},[e._v("登录")])],1)])])])])],1)},staticRenderFns:[]};var c=t("VU/8")(n,i,!1,function(e){t("S5Fz")},"data-v-46affd7f",null);r.default=c.exports},S5Fz:function(e,r){}});
//# sourceMappingURL=35.f077a40b1d5c213af7a3.js.map