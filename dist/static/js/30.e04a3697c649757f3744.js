webpackJsonp([30],{A8Ql:function(t,e){},Ut2t:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("gvrZ"),r=n("CCn6");function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function a(r,i){try{var s=e[r](i),o=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})}}var s={name:"mOrder",data:function(){return{activeName:"all",timeOptions:[{value:"选项1",label:"近三个月订单"},{value:"选项2",label:"2019年订单"}],timeValue:"近三个月订单",tableData:[],rows:4,page:1,count:0}},components:{mheadTop:a.a},mounted:function(){this.initData()},computed:{},methods:{initData:function(){var t=this;return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$route.query.activeName?t.changeType(t.$route.query.activeName):t.getList(t.activeName);case 1:case"end":return e.stop()}},e,t)}))()},getList:function(t){var e=this;return i(regeneratorRuntime.mark(function n(){var a,i,s,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("yifukuan"!=t){n.next=12;break}return n.next=3,Object(r.y)("yifukuan",e.rows,e.page);case 3:return a=n.sent,n.next=6,Object(r.y)("peisong",e.rows,e.page);case 6:for(i=n.sent,e.tableData=a.data,s=0;s<i.data.length;s++)e.tableData.push(i.data[s]);e.count=a.count+i.count,n.next=16;break;case 12:return n.next=14,Object(r.y)("all"==t?"":t,e.rows,e.page);case 14:12007!=(o=n.sent).status?(e.count=o.count,e.tableData=o.data):e.$message({message:o.msg,type:"warning"});case 16:console.log("this.count:"+e.count),console.log("activeName:"+e.activeName);case 18:case"end":return n.stop()}},n,e)}))()},toEvaluate:function(t){this.$router.push({path:"/userCenter/evaluate/evaluate",query:{order_id:t}})},toDetail:function(t){this.$router.push({path:"/userCenter/order/detail",query:{order_id:t}})},changeType:function(t){var e=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.activeName=t,e.page=1,"yifukuan"==e.activeName?e.getList("yifukuan"):e.getList(t);case 3:case"end":return n.stop()}},n,e)}))()},cancelOrder:function(t){var e=this;this.$confirm("你确定要取消该订单吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(i(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(r.K)(t);case 2:12e3==(a=n.sent).status?(e.$message({message:a.msg,type:"success"}),e.changeType(e.activeName)):e.$message({message:a.msg,type:"warning"});case 4:case"end":return n.stop()}},n,e)}))).catch(function(){})},payNow:function(t){var e=this;return i(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("micromessenger"!=window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)){n.next=8;break}return n.next=4,Object(r.z)(t);case 4:a=n.sent,window.location.href=a.url,n.next=9;break;case 8:e.$router.push({path:"/order/pay",query:{orderId:t}});case 9:case"end":return n.stop()}},n,e)}))()},toReceive:function(t){var e=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.$confirm("您是否收到该订单商品?","",{confirmButtonText:"已收货",cancelButtonText:"未收货",type:"warning"}).then(i(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(r.L)(t);case 2:12e3==(a=n.sent).status?(e.$message({message:a.msg,type:"success"}),e.changeType(e.activeName)):e.$message({message:a.msg,type:"warning"});case 4:case"end":return n.stop()}},n,e)}))).catch(function(){});case 1:case"end":return n.stop()}},n,e)}))()},toLogistics:function(t){var e=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.$router.push({path:"/userCenter/order/logistics",query:{order_id:t}});case 1:case"end":return n.stop()}},n,e)}))()},toGoodDetail:function(t){this.$router.push({path:"/good/detail",query:{specifications_id:t}})},handleCurrentChange:function(t){this.page=t,console.log(this.activeName),this.getList(this.activeName)}},created:function(){}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("mhead-top",{attrs:{titleHead:"我的订单",lfIcon:"el-icon-arrow-left icon",lfUrl:"/userCenter/index/index",rgIcon:"el-icon-s-home icon",rgUrl:"/home"}}),t._v(" "),n("div",{staticClass:"mBg"},[n("div",{staticClass:"m-u-order"},[n("div",{staticClass:"mot-box"},[n("div",{class:"all"==t.activeName?"mon-item active":"mon-item",on:{click:function(e){return t.changeType("all")}}},[t._v("\n                    全部\n                ")]),t._v(" "),n("div",{class:"weifukuan"==t.activeName?"mon-item active":"mon-item",on:{click:function(e){return t.changeType("weifukuan")}}},[t._v("\n                    待付款\n                ")]),t._v(" "),n("div",{class:"yifukuan"==t.activeName?"mon-item active":"mon-item",on:{click:function(e){return t.changeType("yifukuan")}}},[t._v("\n                    待收货\n                ")]),t._v(" "),n("div",{class:"daipinglun"==t.activeName?"mon-item active":"mon-item",on:{click:function(e){return t.changeType("daipinglun")}}},[t._v("\n                    待评价\n                ")]),t._v(" "),n("div",{class:"quxiao"==t.activeName?"mon-item active":"mon-item",on:{click:function(e){return t.changeType("quxiao")}}},[t._v("\n                    已取消\n                ")])]),t._v(" "),n("el-collapse-transition",[0!=t.tableData.length?n("div",{staticClass:"mot-list"},t._l(t.tableData,function(e,a){return n("div",{key:a,staticClass:"mot-inBox"},[n("div",{staticClass:"mot-top"},[n("div",{staticClass:"mot-num"},[t._v("订单编号："+t._s(e.order_code))]),t._v(" "),n("div",{class:"待付款"==e.state?"mot-state unfinish":"取消订单"==e.state?"mot-state color9":"mot-state finish"},[t._v(t._s(e.state))])]),t._v(" "),t._l(e.goods,function(e,a){return n("div",{key:a,staticClass:"mot-pros",on:{click:function(n){return t.toGoodDetail(e.specifications_id)}}},[n("div",{staticClass:"mop-item"},[n("div",{staticClass:"mop-pic"},[n("el-image",{staticClass:"mop-image",attrs:{src:e.pic}})],1),t._v(" "),n("div",{staticClass:"mop-info"},[n("div",{staticClass:"mop-name"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"mop-spec"},[n("span",[t._v("规格："+t._s(e.spec_name)+t._s(e.spec_unit))])]),t._v(" "),n("div",{staticClass:"flex f-nowrap j-bet"},[n("div",{staticClass:"mop-price"},[t._v("￥"+t._s(e.price)+"/"+t._s(e.supply_unit))]),t._v(" "),n("div",{staticClass:"mop-number"},[t._v("\n                                        ×"+t._s(e.number)+"\n                                    ")])])])])])}),t._v(" "),n("div",{staticClass:"mot-count"},[t._v("\n                        合计：￥"+t._s(e.price_total)+"\n                    ")]),t._v(" "),n("div",{staticClass:"mot-control"},["待付款"==e.state?n("el-button",{staticClass:"mot-btn",attrs:{size:"mini"},on:{click:function(n){return t.cancelOrder(e.order_id)}}},[t._v("取消订单")]):t._e(),t._v(" "),n("el-button",{staticClass:"mot-btn",attrs:{size:"mini"},on:{click:function(n){return t.toDetail(e.order_id)}}},[t._v("订单详情")]),t._v(" "),"配送中"==e.state?n("el-button",{staticClass:"mot-btn",attrs:{size:"mini"},on:{click:function(n){return t.toLogistics(e.order_id)}}},[t._v("查看物流")]):t._e(),t._v(" "),"配送中"==e.state||"已付款"==e.state?n("el-button",{staticClass:"mot-btn",attrs:{size:"mini",type:"primary",plain:""},on:{click:function(n){return t.toReceive(e.order_id)}}},[t._v("确认收货")]):t._e(),t._v(" "),"已签收"==e.state&&0==e.is_comment?n("el-button",{staticClass:"mot-btn",attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(n){return t.toEvaluate(e.order_id)}}},[t._v("评价")]):t._e(),t._v(" "),"已签收"==e.state&&1==e.is_comment?n("el-button",{attrs:{type:"text",disabled:""}},[t._v("已评价")]):t._e(),t._v(" "),"待付款"==e.state?n("el-button",{staticClass:"mot-btn",attrs:{size:"mini",type:"warning",plain:""},on:{click:function(n){return t.payNow(e.order_id)}}},[t._v("立即付款")]):t._e()],1)],2)}),0):n("div",[n("div",{staticClass:"mt50 f16 color6 tc"},[t._v("暂无数据")])])]),t._v(" "),n("div",{staticClass:"page"},[n("el-pagination",{staticClass:"tc mt10",attrs:{small:"","prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next","current-page":t.page,"page-size":t.rows,"pager-count":5,total:t.count},on:{"current-change":t.handleCurrentChange}})],1)],1)])],1)},staticRenderFns:[]};var c=n("VU/8")(s,o,!1,function(t){n("A8Ql")},null,null);e.default=c.exports}});
//# sourceMappingURL=30.e04a3697c649757f3744.js.map