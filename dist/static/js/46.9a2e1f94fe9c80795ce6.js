webpackJsonp([46],{"+zy4":function(t,e){},qVLb:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("gvrZ"),a=s("NYxO"),r=s("CCn6"),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t};function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function i(a,r){try{var o=e[a](r),n=o.value}catch(t){return void s(t)}if(!o.done)return Promise.resolve(n).then(function(t){i("next",t)},function(t){i("throw",t)});t(n)}("next")})}}var c={name:"mOrderDetail",data:function(){return{order_id:"",orderData:{invoice:{invoice_id:"",type:""}}}},components:{mheadTop:i.a},mounted:function(){this.initData()},computed:o({},Object(a.d)(["userInfo","login"])),methods:{initData:function(){var t=this;return n(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.order_id=t.$route.query.order_id||"",e.next=3,Object(r.A)(t.order_id);case 3:12007==(s=e.sent).status?t.$alert("立即前往登录/注册","您还未登录",{confirmButtonText:"确定",callback:function(e){t.$router.push({path:"/login/login"})}}):t.orderData=s;case 5:case"end":return e.stop()}},e,t)}))()},cancelOrder:function(t){var e=this;return n(regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e.$confirm("你确定要取消该订单吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(n(regeneratorRuntime.mark(function s(){var i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(r.K)(t);case 2:12e3==(i=s.sent).status?(e.$message({message:i.msg,type:"success"}),e.initData()):e.$message({message:i.msg,type:"warning"});case 4:case"end":return s.stop()}},s,e)}))).catch(function(){});case 1:case"end":return s.stop()}},s,e)}))()},toLogistics:function(t){var e=this;return n(regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:0==e.orderData.logistics.code?e.$router.push({path:"/userCenter/order/logistics",query:{order_id:t}}):e.$message({message:"暂无更多物流信息",type:"warning"});case 1:case"end":return s.stop()}},s,e)}))()},toEvaluate:function(t){this.$router.push({path:"/userCenter/evaluate/evaluate",query:{order_id:t}})},payNow:function(t){var e=this;return n(regeneratorRuntime.mark(function s(){var i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if("micromessenger"!=window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)){s.next=8;break}return s.next=4,Object(r.z)(t);case 4:i=s.sent,window.location.href=i.url,s.next=9;break;case 8:e.$router.push({path:"/order/pay",query:{orderId:t}});case 9:case"end":return s.stop()}},s,e)}))()},orderConfirm:function(t){var e=this;this.$confirm("是否确认收货?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(n(regeneratorRuntime.mark(function s(){var i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(r.L)(t);case 2:12e3==(i=s.sent).status?(e.$message({message:i.msg,type:"success"}),e.initData()):e.$message({message:i.msg,type:"warning"});case 4:case"end":return s.stop()}},s,e)}))).catch(function(){})},toGoodDetail:function(t){this.$router.push({path:"/good/detail",query:{specifications_id:t}})}},created:function(){},watch:{userInfo:function(t){t&&t.user_id&&this.initData()},$route:function(){this.order_id=this.$route.query.order_id||"",this.orderData=Object(r.A)(this.order_id)}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mBg"},[s("mhead-top",{attrs:{titleHead:"订单详情",lfIcon:"el-icon-arrow-left icon",lfUrl:"/userCenter/order/order",rgIcon:"el-icon-s-home icon",rgUrl:"/home"}}),t._v(" "),s("div",{staticClass:"mo-state"},[s("div",{staticClass:"mo-state-card"},[s("h1",[t._v(t._s(t.orderData.state))]),t._v(" "),s("img",{attrs:{src:""}})])]),t._v(" "),t.orderData.logistics?s("div",{staticClass:"mo-distrib pr"},[s("div",{staticClass:"mo-di-line",on:{click:function(e){return t.toLogistics(t.order_id)}}},[s("i",{staticClass:"el-icon-truck icon"}),t._v(" "),s("div",{staticClass:"mo-di-info"},[s("div",{staticClass:"text"},[t._v(t._s(12010==t.orderData.logistics.code?"包裹正在等待揽收":"运送中"))]),t._v(" "),12010!=t.orderData.logistics.code?s("div",{staticClass:"date"},[t._v(t._s(t.orderData.logistics.data[0].brand)+" 单号："+t._s(t.orderData.logistics.data[0].no))]):t._e()])]),t._v(" "),s("i",{staticClass:"el-icon-arrow-right icon arrowRight"})]):t._e(),t._v(" "),""!=t.orderData.address?s("div",{staticClass:"mo-rece"},[s("div",{staticClass:"mo-di-line"},[s("i",{staticClass:"el-icon-location-information icon"}),t._v(" "),s("div",{staticClass:"mo-di-info w"},[s("div",{staticClass:"flex f-nowrap j-bet"},[s("span",[t._v(t._s(t.orderData.username))]),t._v(" "),s("span",[t._v(t._s(t.orderData.mobile))])]),t._v(" "),s("div",{staticClass:"color9"},[t._v(t._s(t.orderData.address))])])])]):t._e(),t._v(" "),s("div",{staticClass:"mo-shopList"},[s("h1",[t._v("商品清单")]),t._v(" "),t._l(t.orderData.goods,function(e,i){return s("div",{staticClass:"mop-item",on:{click:function(s){return t.toGoodDetail(e.spec_id)}}},[s("div",{staticClass:"mop-pic"},[s("el-image",{staticClass:"mop-image",attrs:{src:e.pic}})],1),t._v(" "),s("div",{staticClass:"mop-info"},[s("div",{staticClass:"mod-name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"mod-spec"},[s("span",[t._v("规格："+t._s(e.spec_name)+t._s(e.spec_unit))])]),t._v(" "),s("div",{staticClass:"mod-price"},[s("div",{staticClass:"mop-price"},[t._v("￥"+t._s(e.price)+"/"+t._s(e.supply_unit))]),t._v(" "),s("div",{staticClass:"mop-number"},[t._v("\n                            ×"+t._s(e.number)+"\n                        ")])])])])})],2),t._v(" "),t.orderData.invoice?s("div",{staticClass:"mo-shopItem"},[0==t.orderData.invoice.type?s("div",[t._m(0),t._v(" "),s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("发票抬头")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v(t._s(t.orderData.invoice.ename))])]),t._v(" "),s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("企业税号")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v(t._s(t.orderData.invoice.taxnumber))])]),t._v(" "),s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("开户银行")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v(t._s(t.orderData.invoice.bank))])]),t._v(" "),s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("银行账号")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v(t._s(t.orderData.invoice.banknumber))])]),t._v(" "),s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("地址")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v(t._s(t.orderData.invoice.address))])]),t._v(" "),s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("电话")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v(t._s(t.orderData.invoice.phone))])])]):s("div",[t._m(1),t._v(" "),s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("发票抬头")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v(t._s(t.orderData.invoice.title))])]),t._v(" "),s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("地址")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v(t._s(t.orderData.invoice.address))])]),t._v(" "),s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("电话")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v(t._s(t.orderData.invoice.phone))])])])]):t._e(),t._v(" "),s("div",{staticClass:"mo-shopItem"},[s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("商品总额")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v("￥"+t._s(t.orderData.price_total))])]),t._v(" "),s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("订单总价")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v("￥"+t._s(t.orderData.price_total))])]),t._v(" "),s("div",{staticClass:"mo-item-line count"},[s("div",{staticClass:"mo-tit"},[t._v("实付金额")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v("￥"+t._s(t.orderData.price_total))])])]),t._v(" "),s("div",{staticClass:"mo-shopItem"},[s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("订单编号")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v(t._s(t.orderData.order_code))])]),t._v(" "),s("div",{staticClass:"mo-item-line"},[s("div",{staticClass:"mo-tit"},[t._v("下单时间")]),t._v(" "),s("div",{staticClass:"mo-text"},[t._v(t._s(t.orderData.time))])])]),t._v(" "),s("div",{staticClass:"mo-foot"},[s("div",{staticClass:"mo-foot-box"},["待付款"==t.orderData.state?s("el-button",{staticClass:"btn",attrs:{size:"small"},on:{click:function(e){return t.cancelOrder(t.order_id)}}},[t._v("取消订单")]):t._e(),t._v(" "),"配送中"==t.orderData.state||"已付款"==t.orderData.state?s("el-button",{staticClass:"btn w",attrs:{size:"small",type:"primary"},on:{click:function(e){return t.orderConfirm(t.order_id)}}},[t._v("确认收货")]):t._e(),t._v(" "),"已签收"==t.orderData.state&&0==t.orderData.is_comment?s("el-button",{staticClass:"btn",attrs:{size:"small",plain:"",type:"primary"},on:{click:function(e){return t.toEvaluate(t.order_id)}}},[t._v("评价")]):t._e(),t._v(" "),"已签收"==t.orderData.state&&1==t.orderData.is_comment?s("span",{staticStyle:{color:"#2DBE60"}},[s("i",{staticClass:"el-icon-success mr10"}),t._v("订单已完成，您已评价该商品。")]):t._e(),t._v(" "),"待付款"==t.orderData.state?s("el-button",{staticClass:"btn",attrs:{size:"small",type:"warning",plain:""},on:{click:function(e){return t.payNow(t.order_id)}}},[t._v("立即付款")]):t._e(),t._v(" "),"取消订单"==t.orderData.state?s("el-button",{staticClass:"btn",attrs:{size:"small",type:"info",disabled:"",plain:""}},[t._v("订单已取消")]):t._e()],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mo-item-line"},[e("div",{staticClass:"mo-tit"},[this._v("发票类型")]),this._v(" "),e("div",{staticClass:"mo-text"},[this._v("企业")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mo-item-line"},[e("div",{staticClass:"mo-tit"},[this._v("发票类型")]),this._v(" "),e("div",{staticClass:"mo-text"},[this._v("个人")])])}]};var d=s("VU/8")(c,v,!1,function(t){s("+zy4")},null,null);e.default=d.exports}});
//# sourceMappingURL=46.9a2e1f94fe9c80795ce6.js.map