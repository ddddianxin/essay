webpackJsonp([31],{JOk8:function(t,e){},h7JJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("NYxO"),s=a("XQra"),i=a("USSz"),r=a("CCn6"),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(s,i){try{var r=e[s](i),o=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var u={name:"order",data:function(){return{input:"",activeName:"全部",tableData:[],rows:4,page:1,count:0,type:[{name:"all",value:"全部"},{name:"weifukuan",value:"待付款"},{name:"yifukuan",value:"待收货"},{name:"daipinglun",value:"待评价"},{name:"quxiao",value:"已取消"}]}},components:{sideBar:s.a,headTop:i.a},mounted:function(){this.getUserInfo(),this.initData()},computed:o({},Object(n.d)(["userInfo","login"])),methods:o({},Object(n.b)(["getUserInfo"]),{handleClick:function(t,e){this.page=1,console.log("target:"+e.target.getAttribute("id").substr(4));var a,n=e.target.getAttribute("id").substr(4);for(var s in this.activeName=n,this.type)this.type[s].value==n&&(a=this.type[s].name);this.changeType(a)},handleCommand:function(t){for(var e in this.page=1,console.log("command:"+t),this.type)this.type[e].name==t&&(this.activeName=this.type[e].value);this.changeType(t)},initData:function(){var t=this;return c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$route.query.activeName?t.changeType(t.$route.query.activeName):t.getList("");case 1:case"end":return e.stop()}},e,t)}))()},getList:function(t){var e=this;return c(regeneratorRuntime.mark(function a(){var n,s,i,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("yifukuan"!=t){a.next=13;break}return a.next=3,Object(r.y)("yifukuan",e.rows,e.page);case 3:return n=a.sent,a.next=6,Object(r.y)("peisong",e.rows,e.page);case 6:for(s=a.sent,e.tableData=n.data,i=0;i<s.data.length;i++)e.tableData.push(s.data[i]);e.count=n.count+s.count,e.activeName="待收货",a.next=18;break;case 13:return a.next=15,Object(r.y)(t,e.rows,e.page);case 15:if(o=a.sent,""==t)e.activeName="全部";else for(i in e.type)e.type[i].name==t&&(e.activeName=e.type[i].value);12007!=o.status?(e.count=o.count,e.tableData=o.data):e.$message({message:o.msg,type:"warning"});case 18:console.log("this.count:"+e.count),console.log("activeName:"+e.activeName);case 20:case"end":return a.stop()}},a,e)}))()},toEvaluate:function(t){this.$router.push({path:"/userCenter/evaluate/evaluate",query:{order_id:t}})},toDetail:function(t){this.$router.push({path:"/userCenter/order/detail",query:{order_id:t}})},toGood:function(t){this.$router.push({path:"/good/detail",query:{specifications_id:t}})},payNow:function(t){this.$router.push({path:"/order/pay",query:{orderId:t}})},orderConfirm:function(t){var e=this;this.$confirm("是否确认收货?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c(regeneratorRuntime.mark(function a(){var n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(r.L)(t);case 2:12e3==(n=a.sent).status?(e.$message({message:n.msg,type:"success"}),e.initData()):e.$message({message:n.msg,type:"warning"});case 4:case"end":return a.stop()}},a,e)}))).catch(function(){})},toLogin:function(){this.$router.push({path:"/login/login"})},changeType:function(t){var e=this;return c(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:"yifukuan"==t?e.getList("yifukuan"):"all"==t?e.getList(""):e.getList(t);case 1:case"end":return a.stop()}},a,e)}))()},cancelOrder:function(t){var e=this;console.log(t),this.$confirm("你确定要取消该订单吗?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c(regeneratorRuntime.mark(function a(){var n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(r.K)(t);case 2:12e3==(n=a.sent).status?(e.$message({message:n.msg,type:"success"}),e.changeType(e.activeName)):e.$message({message:n.msg,type:"warning"});case 4:case"end":return a.stop()}},a,e)}))).catch(function(){})},handleCurrentChange:function(t){this.page=t;var e="";for(var a in this.type)this.type[a].value==this.activeName&&(e="all"==this.type[a].name?"":this.type[a].name);this.getList(e)}}),created:function(){},watch:{userInfo:function(t){t&&t.user_id&&!this.list&&this.initData()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("head-top",{attrs:{webActive:"mine"}}),t._v(" "),a("div",{staticClass:"bgGray",attrs:{id:"unIndex"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"ucBg"},[a("side-bar"),t._v(" "),a("div",{staticClass:"ucPanel ucP_Box"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.type,function(t,e){return a("el-tab-pane",{key:e,attrs:{label:t.value,name:t.value}})}),1),t._v(" "),a("div",{staticClass:"o_outBox"},[a("div",{staticClass:"o_d_top"},[t._m(0),t._v(" "),a("div",{staticClass:"o_d_receiver"},[t._v("\n                                    收货人\n                                ")]),t._v(" "),a("div",{staticClass:"o_d_price"},[t._v("\n                                    金额\n                                ")]),t._v(" "),a("div",{staticClass:"o_d_state"},[a("el-dropdown",{on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n                                              "+t._s(t.activeName)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.type,function(e,n){return a("el-dropdown-item",{key:n,attrs:{command:e.name}},[t._v(t._s(e.value))])}),1)],1)],1),t._v(" "),a("div",{staticClass:"o_d_control"},[t._v("\n                                    操作\n                                ")])]),t._v(" "),t.login?0==t.tableData.length?a("div",{staticClass:"tc f16 mt30"},[t._v("暂无数据")]):t._l(t.tableData,function(e,n){return a("div",{key:n,staticClass:"i_order"},[a("div",{staticClass:"i_order_top"},[a("span",[t._v("订单号："+t._s(e.order_code))]),t._v(" "),a("span",[t._v(t._s(e.time))])]),t._v(" "),a("div",{staticClass:"i_o_content flex f-nowrap"},[a("div",{staticClass:"o_d_pro"},t._l(e.goods,function(e,n){return a("div",{key:n,staticClass:"i_o_item flex f-nowrap"},[a("el-image",{staticClass:"i_o_pic",attrs:{fit:"contain",src:e.pic},on:{click:function(a){return t.toGood(e.specifications_id)}}}),t._v(" "),a("div",{staticClass:"i_o_info"},[a("p",{staticClass:"color3 i_o_name",on:{click:function(a){return t.toGood(e.specifications_id)}}},[t._v(t._s(e.name))]),t._v(" "),a("p",{staticClass:"color9"},[t._v("规格："+t._s(e.spec_name)+t._s(e.spec_unit))]),t._v(" "),a("p",{staticClass:"color6 flex f-nowrap w j-bet"},[a("span",[t._v("￥"+t._s(e.price)+"/"+t._s(e.supply_unit))]),t._v(" "),a("span",{staticClass:"ml10"},[t._v("×"+t._s(e.number))])])])],1)}),0),t._v(" "),a("div",{staticClass:"o_d_receiver o_bLf"},[""==e.username?a("div",[t._v("自提")]):a("el-popover",{attrs:{placement:"top",width:"200",trigger:"hover"}},[a("div",[a("p",{staticClass:"f12 mb5"},[t._v(t._s(e.username))]),t._v(" "),a("p",{staticClass:"f12 mb5"},[t._v(t._s(e.address))]),t._v(" "),a("p",{staticClass:"f12"},[t._v(t._s(e.mobile))])]),t._v(" "),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"el-icon-user color9 mr5"}),t._v(t._s(e.username))])])],1),t._v(" "),a("div",{staticClass:"o_d_price o_bLf"},[t._v("\n                                        总额：￥"+t._s(e.price_total)+"\n                                        "),0!=e.is_pay?a("p",{staticClass:"color9"},[t._v(t._s(0==e.pay_type?"线下支付":"线上支付"))]):a("p",{staticClass:"color9"},[t._v("未支付")])]),t._v(" "),a("div",{staticClass:"o_d_state o_bLf"},[a("p",{class:"待付款"==e.state?"colorPrice":"取消订单"==e.state?"color9":"colorGreen"},[t._v(t._s(e.state))]),t._v(" "),a("p",[a("span",{staticClass:"cro_btn",on:{click:function(a){return t.toDetail(e.order_id)}}},[t._v("订单详情")])])]),t._v(" "),a("div",{staticClass:"o_d_control  o_bLf"},[a("p",["待付款"==e.state?a("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(a){return t.payNow(e.order_id)}}},[t._v("立即付款")]):t._e()],1),t._v(" "),a("p",["已付款"==e.state||"配送中"==e.state?a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return t.orderConfirm(e.order_id)}}},[t._v("确认收货")]):t._e()],1),t._v(" "),a("p",["待付款"==e.state?a("span",{staticClass:"cro_btn",on:{click:function(a){return t.cancelOrder(e.order_id)}}},[t._v("取消订单")]):t._e()]),t._v(" "),a("p",["已签收"==e.state&&0==e.is_comment?a("el-button",{staticClass:"cro_btn cro_eva",attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return t.toEvaluate(e.order_id)}}},[t._v("评价")]):t._e()],1),t._v(" "),a("p",["已签收"==e.state&&1==e.is_comment?a("el-button",{attrs:{type:"text",disabled:""}},[t._v("已评价")]):t._e()],1)])])])}):a("div",{staticClass:"tc mt30"},[a("el-button",{attrs:{type:"warning",plain:""},on:{click:t.toLogin}},[t._v("\n                                    请先登录\n                                ")])],1)],2),t._v(" "),a("el-pagination",{staticClass:"tc mt15",attrs:{"hide-on-single-page":"",background:"",layout:"prev, pager, next","current-page":t.page,"page-size":t.rows,total:t.count},on:{"current-change":t.handleCurrentChange}})],1)],1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"o_d_pro flex f-nowrap"},[e("div",{staticClass:"o_d_date"}),this._v(" "),e("div",{staticClass:"o_d_detail"},[this._v("\n                                        订单详情\n                                    ")])])}]};var _=a("VU/8")(u,l,!1,function(t){a("JOk8")},"data-v-4c92f200",null);e.default=_.exports}});
//# sourceMappingURL=31.c82fc12f19c460247ea7.js.map