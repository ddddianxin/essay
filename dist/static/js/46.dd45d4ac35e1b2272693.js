webpackJsonp([46],{etoW:function(t,a){},nunB:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("gvrZ"),n=e("XYb/"),s=e("CCn6"),o=e("yclV"),r=e("ux7m");function l(t){return function(){var a=t.apply(this,arguments);return new Promise(function(t,e){return function i(n,s){try{var o=a[n](s),r=o.value}catch(t){return void e(t)}if(!o.done)return Promise.resolve(r).then(function(t){i("next",t)},function(t){i("throw",t)});t(r)}("next")})}}var c,u,d,p=(c={name:"news",data:function(){return{cn:0,id:"",totalPage:1,totalRow:1,organizationId:"",scrollY:0,page:1,rows:10,noData:!1,loadingText:"加载中...",scrollH:300,listData:[],topVal:""}},components:{headTop:i.a,sideMenu:n.a,Scroll:r.a},created:function(){},beforeMount:function(t){var a=document.documentElement.clientHeight||document.body.clientHeight;this.scrollH=a-90-30-102},mounted:function(){this.cn=Object(o.a)("inCN"),this.initData()},computed:{},methods:{initData:function(){this.id=this.$route.query.id,this.organizationId=this.$route.query.organizationId,this.page=1,this.getData()},toUrl:function(t){this.$router.push({path:t,query:{id:id,organizationId:organizationId}})},toNewsDetail:function(t,a){this.$router.push({path:"/news/detail",query:{id:t,organizationId:a}})},getData:function(){var t=this;return l(regeneratorRuntime.mark(function a(){var e,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("getdata"),a.next=3,Object(s.c)(t.cn,t.page,t.rows,t.organizationId,t.id);case 3:e=a.sent,0!=(i=e.data.list).length&&i.length==t.rows?(t.noData=!1,t.listData=i,1==t.page&&null!=t.listData[0].attributeTypeName?(t.topVal=t.listData[0],t.listData.splice(0,1)):t.topVal="",t.page++,t.loadingText="上拉加载更多"):(t.listData=i,1==t.page&&null!=t.listData[0].attributeTypeName?(t.topVal=t.listData[0],t.listData.splice(0,1)):t.topVal="",t.page++,t.noData=!0,t.loadingText=""),console.log(t.topVal),console.log(t.listData);case 8:case"end":return a.stop()}},a,t)}))()},getmoredata:function(){var t=this;return l(regeneratorRuntime.mark(function a(){var e,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("getmoredata"),""==t.loadingText||"上拉加载更多"==t.loadingText){a.next=3;break}return a.abrupt("return",!1);case 3:return t.loadingText="加载中...",a.next=6,Object(s.c)(t.cn,t.page,t.rows,t.organizationId,t.id);case 6:if(e=a.sent,i=e.data.list,t.loadingText="",0!=i.length){a.next=12;break}return t.loadingText="已加载全部",a.abrupt("return",!1);case 12:t.page++,t.listData=t.listData.concat(i),t.loadingText="上拉加载更多";case 15:case"end":return a.stop()}},a,t)}))()}}},d=function(){},(u="created")in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,c),g={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"bg"},[e("head-top",{attrs:{webActive:"news",title:"新闻动态"}}),t._v(" "),e("div",{staticClass:"sciNewsBg"},[e("side-menu",{attrs:{webTitle:"新闻动态",webActive:"中心动态"}}),t._v(" "),e("div",{staticClass:"sciNewsList"},[e("scroll",{staticClass:"wrapper",style:"height:"+t.scrollH+"px;",attrs:{data:t.listData,listenScroll:!0,pulldown:!0,pullup:!0},on:{pulldown:t.getData,scrollToEnd:t.getmoredata}},[e("div",{staticClass:"sciList"},[t.topVal?e("div",{staticClass:"mActItem",on:{click:function(a){return t.toNewsDetail(t.topVal.id,t.topVal.organizationId)}}},[e("div",{staticClass:"mActPic"},[e("img",{attrs:{src:t.topVal.mainPic}})]),t._v(" "),e("div",{staticClass:"mActInfo"},[e("div",{staticClass:"title"},[t._v(t._s(t.topVal.contentTitle))]),t._v(" "),e("div",{staticClass:"subTitle"},[t._v(t._s(t.topVal.plainText))]),t._v(" "),e("div",{staticClass:"mActDate"},[e("span",{staticClass:"mr10"},[t._v(t._s(t.topVal.attributeTypeName))]),t._v(t._s(t.topVal.publishTime))])])]):t._e(),t._v(" "),t._l(t.listData,function(a,i){return e("div",{key:i,staticClass:"sciNewsItem",on:{click:function(e){return t.toNewsDetail(a.id,a.organizationId)}}},[e("div",{staticClass:"sciNewsPic"},[e("img",{attrs:{src:a.mainPic}})]),t._v(" "),e("div",{staticClass:"sciNewsInfo"},[e("div",{staticClass:"title"},[t._v(t._s(a.contentTitle))]),t._v(" "),e("div",{staticClass:"subTitle"},[t._v(t._s(a.plainText))]),t._v(" "),e("div",{staticClass:"sciNewsDate"},[t._v(t._s(a.publishTime))])])])}),t._v(" "),e("view",{staticClass:"loading"},[t._v(t._s(t.loadingText))])],2),t._v(" "),e("div",{staticClass:"loading-wrapper"})])],1)],1)],1)},staticRenderFns:[]};var v=e("VU/8")(p,g,!1,function(t){e("etoW")},null,null);a.default=v.exports}});
//# sourceMappingURL=46.dd45d4ac35e1b2272693.js.map