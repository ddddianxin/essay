webpackJsonp([8],{"H+0X":function(e,r,t){e.exports=t.p+"static/img/loginPic.98f02ed.png"},QrVH:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("CCn6"),o=t("yclV"),a=t("USSz"),n=t("NYxO"),i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e};function c(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function s(o,a){try{var n=r[o](a),i=n.value}catch(e){return void t(e)}if(!n.done)return Promise.resolve(i).then(function(e){s("next",e)},function(e){s("throw",e)});e(i)}("next")})}}var u={name:"login",data:function(){return{currentTab:"messageLogin",vertifyUrl:"",quickForm:{mobile:"",piccode:"",code:"",codeToken:""},passwordForm:{username:"",password:""},computedTime:0,quickrules:{mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{type:"number",message:"手机号必须为数字值",trigger:"blur"},{pattern:/^1\d{10}$/,message:"手机号格式不对",trigger:"blur"}],piccode:[{required:!0,message:"请输入图形校验码",trigger:"blur"},{pattern:/^[0-9]*$/,message:"请输入数字",trigger:"blur"}],code:[{required:!0,message:"请输入短信验证码",trigger:"blur"},{pattern:/^[0-9]*$/,message:"请输入数字",trigger:"blur"}]},keyrules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},components:{headTop:a.a},mounted:function(){this.initData()},computed:i({},Object(n.d)(["userInfo","login"])),methods:i({},Object(n.b)(["getUserInfo"]),Object(n.c)(["RECORD_USERINFO"]),{initData:function(){var e=this;return c(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.freshVertify();case 1:case"end":return r.stop()}},r,e)}))()},toggleTab:function(e){this.currentTab=e},submitForm:function(e){var r,t=this;this.$refs[e].validate((r=c(regeneratorRuntime.mark(function e(r){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=15;break}if("messageLogin"!=t.currentTab){e.next=9;break}return Object(o.c)("mobile",t.quickForm.mobile),e.next=5,Object(s.M)(t.quickForm.mobile,t.quickForm.code,t.quickForm.codeToken);case 5:(a=e.sent)&&(12e3==a.status?(Object(o.c)("token",a.token),t.getUserInfo(),t.$router.push({name:"home",params:{}})):13e3==a.status?t.$router.push({path:"/login/userInfo",query:{mobile:t.quickForm.mobile}}):t.$message({message:a.msg,type:"warning"})),e.next=13;break;case 9:return e.next=11,Object(s.H)(t.passwordForm.username,t.passwordForm.password);case 11:(a=e.sent)&&(12e3==a.status&&(Object(o.c)("token",a.token),t.getUserInfo(),t.$router.push({name:"home",params:{}})),t.$message({message:a.msg,type:12e3==a.status?"success":"warning"}));case 13:e.next=17;break;case 15:return console.log("error submit!!"),e.abrupt("return",!1);case 17:case"end":return e.stop()}},e,t)})),function(e){return r.apply(this,arguments)}))},getVerifyCode:function(){var e=this;return c(regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(""!=e.quickForm.mobile){r.next=4;break}e.$message({message:"手机号码不能为空",type:"warning"}),r.next=18;break;case 4:if(/^1\d{10}$/gi.test(e.quickForm.mobile)){r.next=8;break}e.$message({message:"手机格式不正确",type:"warning"}),r.next=18;break;case 8:if(""!=e.quickForm.piccode){r.next=12;break}e.$message({message:"图形校验码不能为空",type:"warning"}),r.next=18;break;case 12:return e.computedTime=30,e.timer=setInterval(function(){e.computedTime--,0==e.computedTime&&clearInterval(e.timer)},1e3),r.next=16,Object(s.v)(e.quickForm.mobile,e.quickForm.piccode,"loginType");case 16:12e3==(t=r.sent).status?(e.quickForm.codeToken=t.codeToken||"",e.$message({message:t.msg,type:"success"})):(e.$message({message:t.msg,type:"warning"}),e.freshVertify(),e.computedTime=0,clearInterval(e.timer));case 18:case"end":return r.stop()}},r,e)}))()},freshVertify:function(){this.vertifyUrl="http://api.sixmol.com/api/v1/VerifyHelper?i="+Math.floor(10*Math.random()+1)}}),created:function(){}},m={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("head-top",{attrs:{webActive:"home"}}),e._v(" "),t("div",{staticClass:"bgLogin",attrs:{id:"login"}},[t("div",{staticClass:"container"},[t("div",{staticClass:"loginBg flex f-nowrap j-bet"},[e._m(0),e._v(" "),t("div",{staticClass:"loginBox"},[t("div",{staticClass:"login-panel"},[t("div",{staticClass:"flex f-nowrap j-bet loginMenu"},[t("div",{staticClass:"loginT",class:{active:"messageLogin"==e.currentTab},attrs:{id:"phoneLog_btn"},on:{click:function(r){return e.toggleTab("messageLogin")}}},[e._v("短信登录")]),e._v(" "),t("div",{staticClass:"loginT",class:{active:"keywordLogin"==e.currentTab},attrs:{id:"passwordLog_btn"},on:{click:function(r){return e.toggleTab("keywordLogin")}}},[e._v("密码登录")])]),e._v(" "),t("el-form",{directives:[{name:"show",rawName:"v-show",value:"messageLogin"==e.currentTab,expression:"currentTab=='messageLogin'"}],ref:"quickForm",staticClass:"quickForm mt15",attrs:{model:e.quickForm,rules:e.quickrules,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入手机号"},model:{value:e.quickForm.mobile,callback:function(r){e.$set(e.quickForm,"mobile",e._n(r))},expression:"quickForm.mobile"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"校验码",prop:"piccode"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"请输入图形校验码"},model:{value:e.quickForm.piccode,callback:function(r){e.$set(e.quickForm,"piccode",r)},expression:"quickForm.piccode"}})],1),e._v(" "),t("el-col",{staticStyle:{height:"40px"},attrs:{offset:1,span:11}},[t("img",{staticClass:"vertifyPic",attrs:{src:e.vertifyUrl},on:{click:function(r){return e.freshVertify()}}})])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"验证码",prop:"code"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"请输入短信验证码"},model:{value:e.quickForm.code,callback:function(r){e.$set(e.quickForm,"code",r)},expression:"quickForm.code"}})],1),e._v(" "),t("el-col",{attrs:{offset:1,span:11}},[t("el-button",{staticClass:"w",attrs:{type:"primary",disabled:!!e.computedTime},on:{click:function(r){return r.preventDefault(),e.getVerifyCode(r)}}},[e._v(e._s(e.computedTime?"已发送("+e.computedTime+"s)":"获取短信验证码"))])],1)],1)],1),e._v(" "),t("el-button",{staticClass:"w mt10 mb15",attrs:{type:"primary"},on:{click:function(r){return e.submitForm("quickForm")}}},[e._v("登录")])],1),e._v(" "),t("el-form",{directives:[{name:"show",rawName:"v-show",value:"keywordLogin"==e.currentTab,expression:"currentTab=='keywordLogin'"}],ref:"passwordForm",staticClass:"passwordForm mt15",attrs:{model:e.passwordForm,rules:e.keyrules,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.passwordForm.username,callback:function(r){e.$set(e.passwordForm,"username",r)},expression:"passwordForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.passwordForm.password,callback:function(r){e.$set(e.passwordForm,"password",r)},expression:"passwordForm.password"}})],1),e._v(" "),t("el-button",{staticClass:"w mt10 mb15",attrs:{type:"primary"},on:{click:function(r){return e.submitForm("passwordForm")}}},[e._v("登录")])],1)],1),e._v(" "),t("div",{staticClass:"loginP_bottom tc"},[e._v("忘记密码？"),t("router-link",{staticClass:"colorGreen",attrs:{to:{path:"/login/forgetkey",query:{}}}},[e._v("找回密码")])],1)])])])])],1)},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"login-des"},[r("img",{attrs:{src:t("H+0X")}})])}]};var l=t("VU/8")(u,m,!1,function(e){t("SRkJ")},"data-v-06c089b1",null);r.default=l.exports},SRkJ:function(e,r){}});
//# sourceMappingURL=8.ed0b82819290c9c4495f.js.map