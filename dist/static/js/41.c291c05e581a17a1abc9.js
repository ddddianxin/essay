webpackJsonp([41],{"GP+n":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("XQra"),o=t("CCn6"),a=t("USSz");function s(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function n(o,a){try{var s=r[o](a),i=s.value}catch(e){return void t(e)}if(!s.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}("next")})}}var i={name:"invoice",data:function(){return{tableData:[],personForm:{invoice_id:"",title:"",address:"",phone:""},companyForm:{invoice_id:"",ename:"",taxnumber:"",address:"",phone:"",bank:"",banknumber:""},dialogFormVisible:!1,invoiceType:"0",personRules:{title:[{required:!0,message:"请输入名称",trigger:"blur"}],address:[{required:!0,message:"请填写地址",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}]},companyRules:{ename:[{required:!0,message:"请输入公司名称",trigger:"blur"}],taxnumber:[{required:!0,message:"请输入公司税号",trigger:"blur"}],address:[{required:!0,message:"请填写开票地址",trigger:"blur"}],phone:[{required:!0,message:"请输入电话号码",trigger:"blur"}],bank:[{required:!0,message:"请输入开户银行",trigger:"blur"}],banknumber:[{required:!0,message:"请输入银行账户",trigger:"blur"}]}}},components:{sideBar:n.a,headTop:a.a},mounted:function(){this.initData()},computed:{},methods:{initData:function(){var e=this;return s(regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(o.F)();case 2:t=r.sent,e.login=12007!=t.status,t&&(12007!=t.status?e.calTable(t):e.$message({message:t.msg,type:"warning"}));case 5:case"end":return r.stop()}},r,e)}))()},calTable:function(e){for(var r=[{invoice_id:"",type:0,title:"",ename:"",taxnumber:"",bank:"",address:"",phone:""},{invoice_id:"",type:1,title:"",ename:"",taxnumber:"",bank:"",address:"",phone:""}],t=0;t<e.length;t++)0==e[t].type?r[0]=e[t]:r[1]=e[t];this.tableData=r},choiceinvoiceType:function(e){this.invoiceType=e},submitForm:function(e,r){var t,n=this;r=r||"",this.$refs[e].validate((t=s(regeneratorRuntime.mark(function e(t){var a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=20;break}if("0"!=n.invoiceType){e.next=7;break}return e.next=4,Object(o.d)(r,"",n.invoiceType,n.companyForm.taxnumber,n.companyForm.address,n.companyForm.banknumber,n.companyForm.phone,n.companyForm.bank,n.companyForm.ename);case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,Object(o.d)(r,n.personForm.title,n.invoiceType,"",n.personForm.address,"",n.personForm.phone,"","");case 9:a=e.sent;case 10:if(!a){e.next=18;break}if(n.$message({message:a.msg,type:12e3==a.status?"success":"warning"}),12e3!=a.status){e.next=18;break}return e.next=15,Object(o.F)();case 15:s=e.sent,n.calTable(s),n.dialogFormVisible=!1;case 18:e.next=22;break;case 20:return console.log("error submit!!"),e.abrupt("return",!1);case 22:case"end":return e.stop()}},e,n)})),function(e){return t.apply(this,arguments)}))},editInvoice:function(e,r){var t=this;return s(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(r),t.invoiceType=String(r),!e){n.next=10;break}return n.next=5,Object(o.r)(e);case 5:0==(a=n.sent).type?(t.companyForm.invoice_id=a.invoice_id,t.companyForm.ename=a.ename,t.companyForm.taxnumber=a.taxnumber,t.companyForm.address=a.address,t.companyForm.phone=a.phone,t.companyForm.bank=a.bank,t.companyForm.banknumber=a.banknumber):(t.personForm.invoice_id=a.invoice_id,t.personForm.title=a.title,t.personForm.address=a.address,t.personForm.phone=a.phone),t.dialogFormVisible=!0,n.next=11;break;case 10:t.dialogFormVisible=!0;case 11:case"end":return n.stop()}},n,t)}))()}},created:function(){}},l={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("head-top",{attrs:{webActive:"mine"}}),e._v(" "),t("div",{staticClass:"bgGray",attrs:{id:"unIndex"}},[t("div",{staticClass:"container"},[t("div",{staticClass:"ucBg"},[t("side-bar"),e._v(" "),t("div",{staticClass:"ucPanel ucP_Box"},[e._m(0),e._v(" "),t("el-table",{staticClass:"invTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[t("el-form-item",{attrs:{label:"类型"}},[t("span",[e._v(e._s(0==r.row.type?"企业":"个人"))])]),e._v(" "),t("el-form-item",{attrs:{label:"发票抬头"}},[t("span",[e._v(e._s(0==r.row.type?r.row.ename:r.row.title))])]),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==r.row.type,expression:"props.row.type==0"}],attrs:{label:"公司税号"}},[t("span",[e._v(e._s(r.row.taxnumber))])]),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==r.row.type,expression:"props.row.type==0"}],attrs:{label:"开户银行"}},[t("span",[e._v(e._s(r.row.bank))])]),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==r.row.type,expression:"props.row.type==0"}],attrs:{label:"银行账号"}},[t("span",[e._v(e._s(r.row.banknumber))])]),e._v(" "),t("el-form-item",{attrs:{label:"地址"}},[t("span",[e._v(e._s(r.row.address))])]),e._v(" "),t("el-form-item",{attrs:{label:"电话"}},[t("span",[e._v(e._s(r.row.phone))])])],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"类型",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v("\n                                    "+e._s(0==r.row.type?"企业":"个人")+"\n                                ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"发票抬头"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v("\n                                "+e._s(0==r.row.type?r.row.ename?r.row.ename:"空":r.row.title?r.row.title:"空")+"\n                                ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-row",[t("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(t){return e.editInvoice(r.row.invoice_id?r.row.invoice_id:"",r.row.type)}}},[e._v("编辑")])],1)]}}])})],1),e._v(" "),t("el-dialog",{attrs:{title:"填写发票信息",visible:e.dialogFormVisible},on:{"update:visible":function(r){e.dialogFormVisible=r}}},[t("div",{staticClass:"m_sel"},[t("div",{staticClass:"m_tit"},[e._v("发票类型：")]),e._v(" "),t("div",{staticClass:"m_choice"},[e._v("\n                                    "+e._s(0==e.invoiceType?"企业":"个人")+"\n                                ")])]),e._v(" "),"0"==e.invoiceType?t("div",[t("el-form",{ref:"companyForm",attrs:{model:e.companyForm,rules:e.companyRules,"label-width":"90px"}},[t("el-form-item",{attrs:{label:"公司名称",prop:"ename"}},[t("el-input",{model:{value:e.companyForm.ename,callback:function(r){e.$set(e.companyForm,"ename",r)},expression:"companyForm.ename"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"公司税号",prop:"taxnumber"}},[t("el-input",{model:{value:e.companyForm.taxnumber,callback:function(r){e.$set(e.companyForm,"taxnumber",r)},expression:"companyForm.taxnumber"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开票地址",prop:"address"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.companyForm.address,callback:function(r){e.$set(e.companyForm,"address",r)},expression:"companyForm.address"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"电话号码",prop:"phone"}},[t("el-input",{model:{value:e.companyForm.phone,callback:function(r){e.$set(e.companyForm,"phone",r)},expression:"companyForm.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开户银行",prop:"bank"}},[t("el-input",{model:{value:e.companyForm.bank,callback:function(r){e.$set(e.companyForm,"bank",r)},expression:"companyForm.bank"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"银行账户",prop:"banknumber"}},[t("el-input",{model:{value:e.companyForm.banknumber,callback:function(r){e.$set(e.companyForm,"banknumber",r)},expression:"companyForm.banknumber"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer tc",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(r){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("companyForm",e.companyForm.invoice_id)}}},[e._v("保 存")])],1)],1):t("div",[t("el-form",{ref:"personForm",attrs:{model:e.personForm,rules:e.personRules,"label-width":"90px"}},[t("el-form-item",{attrs:{label:"名称",prop:"title"}},[t("el-input",{model:{value:e.personForm.title,callback:function(r){e.$set(e.personForm,"title",r)},expression:"personForm.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.personForm.address,callback:function(r){e.$set(e.personForm,"address",r)},expression:"personForm.address"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"电话号码",prop:"phone"}},[t("el-input",{model:{value:e.personForm.phone,callback:function(r){e.$set(e.personForm,"phone",r)},expression:"personForm.phone"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer tc",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(r){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("personForm",e.personForm.invoice_id)}}},[e._v("保 存")])],1)],1)])],1)],1)])])],1)},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"ucTitNav ofh"},[r("span",[this._v("发票管理")])])}]};var m=t("VU/8")(i,l,!1,function(e){t("Q+oo")},"data-v-1d495f96",null);r.default=m.exports},"Q+oo":function(e,r){}});
//# sourceMappingURL=41.c291c05e581a17a1abc9.js.map